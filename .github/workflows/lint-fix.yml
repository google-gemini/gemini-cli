name: 'Suggest Lint Fixes'

on: ['pull_request']

jobs:
  fix_lint:
    runs-on: 'ubuntu-latest'
    permissions:
      contents: 'write'
    steps:
      - uses: 'actions/checkout@v4'
        with:
          repository: '${{ github.event.pull_request.head.repo.full_name }}'
          ref: '${{ github.event.pull_request.head.ref }}'
      - name: 'Set up Node.js'
        uses: 'actions/setup-node@v4'
        with:
          node-version-file: '.nvmrc'
          cache: 'npm'
      - name: 'Install dependencies'
        run: 'npm ci'
      - name: 'Fix lint issues'
        run: 'npm run lint:fix'
      - name: 'Suggest changes'
        uses: 'reviewdog/action-suggester@4747dbc9f9e37adba0943e681cc20db466642158' # v1.21.0
        with:
          tool_name: 'eslint'
          level: 'warning'
          fail_on_error: 'true'
          filter_mode: 'nofilter'
          reporter: 'github-pr-review'
          git_diff: 'git diff'
